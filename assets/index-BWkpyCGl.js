var g=Object.defineProperty;var p=(c,e,t)=>e in c?g(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var a=(c,e,t)=>p(c,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();class f{constructor(e="human"){a(this,"boardState");a(this,"pieceCount");a(this,"currentPlayer");a(this,"gameMode");a(this,"phase");a(this,"highlightOrigin");a(this,"winner");this.boardState=this.createEmptyBoard(),this.pieceCount={X:0,O:0},this.currentPlayer="X",this.gameMode=e,this.phase="placing",this.highlightOrigin={x:1,y:1},this.winner=null}createEmptyBoard(){const e=[];for(let t=0;t<5;t++){const i=[null,null,null,null,null];e.push(i)}return e}get board(){return this.boardState}makeAMove(e,t){this.winner||this.boardState[e][t]===null&&this.pieceCount[this.currentPlayer]<4&&(this.boardState[e][t]=this.currentPlayer,this.pieceCount[this.currentPlayer]++,this.checkPhaseTransition(),this.checkForWin(),this.winner||(this.currentPlayer=this.currentPlayer==="X"?"O":"X"))}makeAIMove(){if(!this.winner){if(this.pieceCount.O<4){const e=this.findBlockingMove("X");if(e){this.boardState[e.x][e.y]="O",this.pieceCount.O++,this.checkPhaseTransition(),this.checkForWin(),this.currentPlayer="X";return}}if(this.pieceCount.O<4){for(let e=0;e<5;e++)for(let t=0;t<5;t++)if(this.boardState[e][t]===null){this.boardState[e][t]="O",this.pieceCount.O++,this.checkPhaseTransition(),this.checkForWin(),this.winner||(this.currentPlayer="X");return}}}}checkPhaseTransition(){this.pieceCount.X>=2&&this.pieceCount.O>=2&&(this.phase="actionMode")}placeAnotherPiece(e,t){this.winner||this.phase==="actionMode"&&this.currentPlayer&&this.pieceCount[this.currentPlayer]<4&&this.boardState[e][t]===null&&(this.boardState[e][t]=this.currentPlayer,this.pieceCount[this.currentPlayer]++,this.checkForWin(),this.winner||(this.currentPlayer=this.currentPlayer==="X"?"O":"X"))}moveGrid(e){if(this.winner)return;const{x:t,y:i}=this.highlightOrigin;switch(e){case"up":t>0&&this.highlightOrigin.x--;break;case"down":t<2&&this.highlightOrigin.x++;break;case"left":i>0&&this.highlightOrigin.y--;break;case"right":i<2&&this.highlightOrigin.y++;break;case"up-left":t>0&&i>0&&(this.highlightOrigin.x--,this.highlightOrigin.y--);break;case"up-right":t>0&&i<2&&(this.highlightOrigin.x--,this.highlightOrigin.y++);break;case"down-left":t<2&&i>0&&(this.highlightOrigin.x++,this.highlightOrigin.y--);break;case"down-right":t<2&&i<2&&(this.highlightOrigin.x++,this.highlightOrigin.y++);break}}movePiece(e,t,i,r){if(this.winner)return;this.boardState[e][t]===this.currentPlayer&&this.boardState[i][r]===null&&(this.boardState[e][t]=null,this.boardState[i][r]=this.currentPlayer,this.checkForWin(),this.winner||(this.currentPlayer=this.currentPlayer==="X"?"O":"X"))}checkForWin(){const{x:e,y:t}=this.highlightOrigin,i=[];for(let n=e;n<e+3;n++){let s=[];for(let h=t;h<t+3;h++)s.push(this.boardState[n][h]);i.push(s)}const r=this.checkSubGridForThree(i);r&&(this.winner=r)}checkSubGridForThree(e){for(let o=0;o<3;o++){const[l,d,m]=e[o];if(l&&l===d&&d===m)return l}for(let o=0;o<3;o++){const l=e[0][o],d=e[1][o],m=e[2][o];if(l&&l===d&&d===m)return l}const t=e[0][0],i=e[1][1],r=e[2][2];if(t&&t===i&&i===r)return t;const n=e[0][2],s=e[1][1],h=e[2][0];return n&&n===s&&s===h?n:null}resetGame(){this.boardState=this.createEmptyBoard(),this.pieceCount={X:0,O:0},this.currentPlayer="X",this.phase="placing",this.highlightOrigin={x:1,y:1},this.winner=null}doRandomActionInActionMode(){if(this.winner||this.currentPlayer!=="O")return;if(this.pieceCount.O<4){const i=this.findBlockingMove("X");if(i){this.boardState[i.x][i.y]="O",this.pieceCount.O++,this.checkForWin(),this.currentPlayer="X";return}}const e=[];switch(this.pieceCount.O<4&&e.push("placePiece"),e.push("moveGrid"),e.push("movePiece"),e[Math.floor(Math.random()*e.length)]){case"placePiece":this.tryPlaceAnotherPieceRandom();break;case"moveGrid":this.tryMoveGridRandom();break;case"movePiece":this.tryMovePieceRandom();break}}tryPlaceAnotherPieceRandom(){if(!(this.pieceCount.O>=4)){for(let e=0;e<5;e++)for(let t=0;t<5;t++)if(this.boardState[e][t]===null){this.boardState[e][t]="O",this.pieceCount.O++,this.checkForWin(),this.winner||(this.currentPlayer="X");return}}}tryMoveGridRandom(){const e=["up","down","left","right","up-left","up-right","down-left","down-right"],t=e[Math.floor(Math.random()*e.length)];this.moveGrid(t),this.winner||(this.currentPlayer="X")}tryMovePieceRandom(){let e=[],t=[];for(let n=0;n<5;n++)for(let s=0;s<5;s++)this.boardState[n][s]==="O"?e.push([n,s]):this.boardState[n][s]===null&&t.push([n,s]);if(e.length===0||t.length===0)return;const i=e[Math.floor(Math.random()*e.length)],r=t[Math.floor(Math.random()*t.length)];this.boardState[i[0]][i[1]]=null,this.boardState[r[0]][r[1]]="O",this.checkForWin(),this.winner||(this.currentPlayer="X")}findBlockingMove(e){for(let t=0;t<5;t++)for(let i=0;i<5;i++)if(this.boardState[t][i]===null){if(this.boardState[t][i]=e,this.checkForWin(),this.winner===e)return this.boardState[t][i]=null,this.winner=null,{x:t,y:i};this.boardState[t][i]=null}return null}}function b(c,e,t){const i=document.createElement("div");i.classList.add("board");for(let r=0;r<5;r++)for(let n=0;n<5;n++){const s=document.createElement("div");s.classList.add("cell"),r>=e.x&&r<e.x+3&&n>=e.y&&n<e.y+3&&s.classList.add("highlight"),s.addEventListener("click",h=>{t(r,n,h)}),s.innerHTML=c[r][n]??"&nbsp;",i.appendChild(s)}return i}function u(c,e,t){const i=c.querySelectorAll(".cell");let r=0;for(let n=0;n<5;n++)for(let s=0;s<5;s++){const h=i[r],o=e[n][s];h.innerHTML=o??"&nbsp;",h.classList.remove("highlight"),n>=t.x&&n<t.x+3&&s>=t.y&&s<t.y+3&&h.classList.add("highlight"),r++}}class C{constructor(){a(this,"game");a(this,"boardElement");a(this,"subMode",null);a(this,"boardContainer");a(this,"gameContainer");a(this,"actionsContainer");a(this,"currentTurnText");a(this,"pieceCountText");a(this,"placePieceBtn");a(this,"moveGridBtn");a(this,"movePieceBtn");a(this,"gridArrowsContainer");a(this,"directions",[{dir:"up",label:"↑"},{dir:"down",label:"↓"},{dir:"left",label:"←"},{dir:"right",label:"→"},{dir:"up-left",label:"↖"},{dir:"up-right",label:"↗"},{dir:"down-left",label:"↙"},{dir:"down-right",label:"↘"}]);a(this,"selectedCell",null);a(this,"awaitingSecondClick",!1);a(this,"startTime",null);a(this,"timerInterval",0);a(this,"timerText");a(this,"gameStarted",!1);this.boardContainer=document.createElement("div"),this.boardContainer.classList.add("board-container"),document.body.appendChild(this.boardContainer),this.gameContainer=document.createElement("div"),this.gameContainer.classList.add("game-container");const e=document.createElement("h1");e.innerHTML="TIC TAC TWO",this.gameContainer.appendChild(e);const t=document.createElement("div"),i=document.createElement("button");i.innerHTML="Human vs Human",i.addEventListener("click",()=>this.startGame("human"));const r=document.createElement("button");r.innerHTML="Human vs AI",r.addEventListener("click",()=>this.startGame("ai"));const n=document.createElement("button");n.innerHTML="Reset Game",n.addEventListener("click",()=>this.resetGame()),t.appendChild(i),t.appendChild(r),t.appendChild(n),this.gameContainer.appendChild(t);const s=document.createElement("div");s.classList.add("status-container"),this.currentTurnText=document.createElement("p"),this.pieceCountText=document.createElement("p"),this.timerText=document.createElement("p"),s.appendChild(this.currentTurnText),s.appendChild(this.pieceCountText),s.appendChild(this.timerText),this.gameContainer.appendChild(s),this.actionsContainer=document.createElement("div"),this.actionsContainer.style.display="none",this.gameContainer.appendChild(this.actionsContainer),this.placePieceBtn=document.createElement("button"),this.placePieceBtn.innerHTML="Place Another Piece",this.placePieceBtn.addEventListener("click",()=>this.activatePlacePieceMode()),this.moveGridBtn=document.createElement("button"),this.moveGridBtn.innerHTML="Move Grid",this.moveGridBtn.addEventListener("click",()=>this.activateMoveGridMode()),this.movePieceBtn=document.createElement("button"),this.movePieceBtn.innerHTML="Move a Piece",this.movePieceBtn.addEventListener("click",()=>this.activateMovePieceMode()),this.actionsContainer.appendChild(this.placePieceBtn),this.actionsContainer.appendChild(this.moveGridBtn),this.actionsContainer.appendChild(this.movePieceBtn),this.gridArrowsContainer=document.createElement("div"),this.gridArrowsContainer.style.display="none",this.actionsContainer.appendChild(this.gridArrowsContainer),this.directions.forEach(h=>{const o=document.createElement("button");o.innerHTML=h.label,o.addEventListener("click",()=>{this.game.moveGrid(h.dir),this.game.winner||(this.game.currentPlayer=this.game.currentPlayer==="X"?"O":"X"),this.subMode=null,this.updateActiveButtonStyles(),u(this.boardElement,this.game.board,this.game.highlightOrigin),this.checkActionMode(),this.updateStatus(),this.aiCheck()}),this.gridArrowsContainer.appendChild(o)}),document.body.insertBefore(this.gameContainer,this.boardContainer),this.startGame("human")}startGame(e){this.game=new f(e),this.boardContainer.innerHTML="",this.boardElement=b(this.game.board,this.game.highlightOrigin,(t,i)=>{this.cellUpdateFn(t,i)}),this.boardContainer.appendChild(this.boardElement),this.actionsContainer.style.display="none",this.subMode=null,this.updateActiveButtonStyles(),this.updateStatus(),this.gameStarted=!1}cellUpdateFn(e,t){if(!this.gameStarted&&this.game.phase==="placing"&&(this.gameStarted=!0,this.startTime=Date.now(),clearInterval(this.timerInterval),this.timerText.textContent="Elapsed Time: 00:00",this.timerInterval=window.setInterval(()=>{const i=Date.now()-this.startTime,r=Math.floor(i/1e3),n=String(Math.floor(r/60)).padStart(2,"0"),s=String(r%60).padStart(2,"0");this.timerText.textContent=`Elapsed Time: ${n}:${s}`},1e3)),!this.game.winner){if(this.game.phase==="placing")this.game.makeAMove(e,t);else switch(this.subMode){case"placePiece":this.game.placeAnotherPiece(e,t),this.subMode=null;break;case"moveGrid":break;case"movePiece":this.handleMovePiece(e,t);break}u(this.boardElement,this.game.board,this.game.highlightOrigin),this.checkActionMode(),this.updateStatus(),this.updateActiveButtonStyles(),this.aiCheck()}}checkActionMode(){this.game.phase==="actionMode"&&(this.actionsContainer.style.display="block")}updateStatus(){if(this.game.winner){clearInterval(this.timerInterval),this.currentTurnText.textContent=`WINNER: ${this.game.winner} !!!`,this.pieceCountText.textContent="Game Over!";return}this.currentTurnText.textContent=`Current Turn: ${this.game.currentPlayer}`;const e=4-this.game.pieceCount.X,t=4-this.game.pieceCount.O;this.pieceCountText.textContent=`Remaining Pieces → X: ${e}, O: ${t}`}activatePlacePieceMode(){this.subMode="placePiece",this.updateActiveButtonStyles()}activateMoveGridMode(){this.subMode="moveGrid",this.updateActiveButtonStyles()}activateMovePieceMode(){this.subMode="movePiece",this.selectedCell=null,this.awaitingSecondClick=!1,this.updateActiveButtonStyles()}handleMovePiece(e,t){this.awaitingSecondClick?(this.selectedCell&&this.game.movePiece(this.selectedCell.x,this.selectedCell.y,e,t),this.awaitingSecondClick=!1,this.selectedCell=null,this.subMode=null):this.game.board[e][t]===this.game.currentPlayer&&(this.selectedCell={x:e,y:t},this.awaitingSecondClick=!0)}updateActiveButtonStyles(){this.placePieceBtn.classList.toggle("active",this.subMode==="placePiece"),this.moveGridBtn.classList.toggle("active",this.subMode==="moveGrid"),this.movePieceBtn.classList.toggle("active",this.subMode==="movePiece"),this.gridArrowsContainer.style.display=this.subMode==="moveGrid"?"block":"none"}resetGame(){this.game.resetGame(),u(this.boardElement,this.game.board,this.game.highlightOrigin),this.actionsContainer.style.display="none",this.subMode=null,this.updateActiveButtonStyles(),this.updateStatus()}aiCheck(){this.game.gameMode==="ai"&&this.game.currentPlayer==="O"&&!this.game.winner&&setTimeout(()=>{this.game.phase==="placing"?this.game.makeAIMove():this.game.doRandomActionInActionMode(),u(this.boardElement,this.game.board,this.game.highlightOrigin),this.checkActionMode(),this.updateStatus()},2e3)}}new C;
